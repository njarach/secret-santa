{% use 'tailwind_2_layout.html.twig' %}

{% block form_row -%}
    <div class="mb-4">
        {{- form_label(form) -}}
        {{- form_widget(form) -}}
        {{- form_errors(form) -}}
    </div>
{%- endblock form_row %}

{% block form_label -%}
    {%- if label is not same as(false) -%}
        {%- set label_attr = label_attr|merge({
            class: (label_attr.class|default('') ~ ' block text-sm font-medium text-gray-900 mb-1')|trim
        }) -%}
        <label{% if label_attr %} {% for attrname, attrvalue in label_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}{% endif %}>
        {{ label|default(name|humanize) }}
        </label>
    {%- endif -%}
{%- endblock form_label %}

{% block form_widget_simple -%}
    {%- set attr = attr|merge({
        class: (attr.class|default('') ~ ' block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500')|trim
    }) -%}
    <input type="{{ type|default('text') }}"{{ block('widget_attributes') }}{% if value is not empty %} value="{{ value }}"{% endif %} />
{%- endblock form_widget_simple %}

{% block textarea_widget -%}
    {%- set attr = attr|merge({
        class: (attr.class|default('') ~ ' block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500 resize-none')|trim
    }) -%}
    <textarea{{ block('widget_attributes') }}>{{ value }}</textarea>
{%- endblock textarea_widget %}

{% block choice_widget_collapsed -%}
    {%- set attr = attr|merge({
        class: (attr.class|default('') ~ ' block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500')|trim
    }) -%}
    <select{{ block('widget_attributes') }}>
        {%- if placeholder is not empty -%}
            <option value="">{{ placeholder }}</option>
        {%- endif -%}
        {%- for group_label, choice in options -%}
            {%- if choice is iterable -%}
                <optgroup label="{{ choice_translation_domain is same as(false) ? group_label : group_label|trans({}, choice_translation_domain) }}">
                    {%- for nested_choice in choice -%}
                        <option value="{{ nested_choice.value }}"{% if nested_choice is selectedchoice(value) %} selected="selected"{% endif %}>{{ choice_translation_domain is same as(false) ? nested_choice.label : nested_choice.label|trans({}, choice_translation_domain) }}</option>
                    {%- endfor -%}
                </optgroup>
            {%- else -%}
                <option value="{{ choice.value }}"{% if choice is selectedchoice(value) %} selected="selected"{% endif %}>{{ choice_translation_domain is same as(false) ? choice.label : choice.label|trans({}, choice_translation_domain) }}</option>
            {%- endif -%}
        {%- endfor -%}
    </select>
{%- endblock choice_widget_collapsed %}

{% block submit_widget -%}
    {%- set attr = attr|merge({
        class: (attr.class|default('') ~ ' w-full bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2')|trim
    }) -%}
    <button type="{{ type|default('submit') }}"{{ block('button_attributes') }}>{{ label|default(name|humanize) }}</button>
{%- endblock submit_widget %}

{% block button_widget -%}
    {%- set attr = attr|merge({
        class: (attr.class|default('') ~ ' bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2')|trim
    }) -%}
    <button type="{{ type|default('button') }}"{{ block('button_attributes') }}>{{ label|default(name|humanize) }}</button>
{%- endblock button_widget %}

{% block form_errors -%}
    {%- if errors|length > 0 -%}
        <div class="mt-1">
            {%- for error in errors -%}
                <p class="text-sm text-red-600">{{ error.message }}</p>
            {%- endfor -%}
        </div>
    {%- endif -%}
{%- endblock form_errors %}

{% block checkbox_widget -%}
    {%- set attr = attr|merge({
        class: (attr.class|default('') ~ ' h-4 w-4 text-red-600 border-gray-300 rounded focus:ring-red-500')|trim
    }) -%}
    <input type="checkbox"{{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />
{%- endblock checkbox_widget %}

{% block radio_widget -%}
    {%- set attr = attr|merge({
        class: (attr.class|default('') ~ ' h-4 w-4 text-red-600 border-gray-300 focus:ring-red-500')|trim
    }) -%}
    <input type="radio"{{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />
{%- endblock radio_widget %}

{% block money_widget -%}
    <div class="relative">
        {%- set prepend = money_pattern starts with '{{' -%}
        {%- set append = money_pattern ends with '}}' -%}
        {%- if prepend -%}
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <span class="text-gray-500 sm:text-sm">{{ money_pattern|replace({'{{ widget }}': ''})|trim }}</span>
            </div>
        {%- endif -%}
        {%- set attr = attr|merge({
            class: (attr.class|default('') ~ ' block w-full ' ~ (prepend ? 'pl-7 ' : '') ~ (append ? 'pr-7 ' : '') ~ 'px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500')|trim
        }) -%}
        {{- block('form_widget_simple') -}}
        {%- if append -%}
            <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                <span class="text-gray-500 sm:text-sm">{{ money_pattern|replace({'{{ widget }}': ''})|trim }}</span>
            </div>
        {%- endif -%}
    </div>
{%- endblock money_widget %}
